From af4a0a6ba1426de138eab330d901f204c9cecf7c Mon Sep 17 00:00:00 2001
From: Dom Cobley <popcornmix@gmail.com>
Date: Thu, 8 Jul 2021 19:16:42 +0100
Subject: [PATCH 0804/2201] Revert "drm/vc4: Increase the core clock to a
 minimum of 500MHz"

This reverts commit c53f42cc56350b4f4bc5542e48707e5e2bd90720.
---
 drivers/gpu/drm/vc4/vc4_kms.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/vc4/vc4_kms.c b/drivers/gpu/drm/vc4/vc4_kms.c
index 7d159b32abba..e77135b6985c 100644
--- a/drivers/gpu/drm/vc4/vc4_kms.c
+++ b/drivers/gpu/drm/vc4/vc4_kms.c
@@ -348,17 +348,11 @@ vc4_atomic_complete_commit(struct drm_atomic_state *state)
 	}
 
 	if (vc4->hvs && vc4->hvs->hvs5) {
-		unsigned long core_rate = max_t(unsigned long,
-						500000000,
-						hvs_state->core_clock_rate);
-
-		drm_dbg(dev, "Raising the core clock at %lu Hz\n", core_rate);
-
 		/*
 		 * Do a temporary request on the core clock during the
 		 * modeset.
 		 */
-		core_req = clk_request_start(hvs->core_clk, core_rate);
+		core_req = clk_request_start(hvs->core_clk, 500000000);
 
 		/*
 		 * And remove the previous one based on the HVS
-- 
2.17.1

