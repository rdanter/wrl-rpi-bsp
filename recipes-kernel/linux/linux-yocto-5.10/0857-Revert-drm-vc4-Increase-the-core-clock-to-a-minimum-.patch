From c3e32c4dd786a0d171ea812efdcf6e17a0d1478c Mon Sep 17 00:00:00 2001
From: Dom Cobley <popcornmix@gmail.com>
Date: Mon, 26 Jul 2021 18:00:55 +0100
Subject: [PATCH 0857/2201] Revert "drm/vc4: Increase the core clock to a
 minimum of 500MHz"

This reverts commit 0a7c2180876d9c7748e055091be21efb959934e2.
---
 drivers/gpu/drm/vc4/vc4_kms.c | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/vc4/vc4_kms.c b/drivers/gpu/drm/vc4/vc4_kms.c
index a2a03b52b275..0f7fad6b2393 100644
--- a/drivers/gpu/drm/vc4/vc4_kms.c
+++ b/drivers/gpu/drm/vc4/vc4_kms.c
@@ -369,17 +369,11 @@ static void vc4_atomic_commit_tail(struct drm_atomic_state *state)
 	}
 
 	if (vc4->hvs && vc4->hvs->hvs5) {
-		unsigned long core_rate = max_t(unsigned long,
-						500000000,
-						new_hvs_state->core_clock_rate);
-
-		drm_dbg(dev, "Raising the core clock at %lu Hz\n", core_rate);
-
 		/*
 		 * Do a temporary request on the core clock during the
 		 * modeset.
 		 */
-		core_req = clk_request_start(hvs->core_clk, core_rate);
+		core_req = clk_request_start(hvs->core_clk, 500000000);
 
 		/*
 		 * And remove the previous one based on the HVS
-- 
2.17.1

