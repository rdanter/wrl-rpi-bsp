From 03adf7626d7d30e6e426b1eb2075c134d59dee33 Mon Sep 17 00:00:00 2001
From: Maxime Ripard <maxime@cerno.tech>
Date: Wed, 16 Mar 2022 09:41:44 +0100
Subject: [PATCH] Revert "clk: requests: Dereference the request pointer after
 the check"

This reverts commit 12917adc036f82c4fda3b80a068d0d51c947d6a6.
---
 drivers/clk/clk.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/clk/clk.c b/drivers/clk/clk.c
index 85f945ece77b..948b3e803589 100644
--- a/drivers/clk/clk.c
+++ b/drivers/clk/clk.c
@@ -2670,11 +2670,10 @@ EXPORT_SYMBOL_GPL(clk_request_start);
  */
 void clk_request_done(struct clk_request *req)
 {
-	struct clk_core *core;
+	struct clk_core *core = req->clk->core;
 
 	if (!req)
 		return;
-	core = req->clk->core;
 
 	clk_prepare_lock();
 
-- 
2.32.0

