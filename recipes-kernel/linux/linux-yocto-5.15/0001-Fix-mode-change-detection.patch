From 91fcdf6145e67739e3d2ad97244cf2d2af5da847 Mon Sep 17 00:00:00 2001
From: Richard Danter <radanter@gmail.com>
Date: Wed, 26 Oct 2022 14:47:44 +0100
Subject: [PATCH] Fix mode change detection

---
 drivers/gpu/drm/vc4/vc4_hdmi.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/vc4/vc4_hdmi.c b/drivers/gpu/drm/vc4/vc4_hdmi.c
index 5216913c3de5..51e7017c1d9c 100644
--- a/drivers/gpu/drm/vc4/vc4_hdmi.c
+++ b/drivers/gpu/drm/vc4/vc4_hdmi.c
@@ -1532,9 +1532,8 @@ static int vc4_hdmi_encoder_atomic_check(struct drm_encoder *encoder,
 	if (ret)
 		return ret;
 
-	/* vc4_hdmi_encoder_compute_config may have changed output_bpc and/or output_format */
-	if (vc4_state->output_bpc != old_vc4_state->output_bpc ||
-	    vc4_state->output_format != old_vc4_state->output_format)
+	/* vc4_hdmi_encoder_compute_config may have changed output_bpc */
+	if (vc4_state->output_bpc != old_vc4_state->output_bpc)
 		crtc_state->mode_changed = true;
 
 	return 0;
-- 
2.34.1

