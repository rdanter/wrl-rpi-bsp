From 784f0a39c945c79fcb52dbb01db08b3bcc8ff7a5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Noralf=20Tr=C3=B8nnes?= <noralf@tronnes.org>
Date: Wed, 13 Apr 2022 19:28:35 +0200
Subject: [PATCH] overlays: mipi-dbi-spi: width-mm and height-mm are mandatory
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

There was a last minute change to the binding in commit 1ecc0c09f19f
("dt-bindings: display: panel: mipi-dbi-spi: Make width-mm/height-mm mandatory").
This was done so userspace can calculate DPI.

Update the overlay to ensure it will work with future kernels.
The driver changes won't be backported to rpi-5.15.

Signed-off-by: Noralf Tr√∏nnes <noralf@tronnes.org>
---
 arch/arm/boot/dts/overlays/mipi-dbi-spi-overlay.dts | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/arm/boot/dts/overlays/mipi-dbi-spi-overlay.dts b/arch/arm/boot/dts/overlays/mipi-dbi-spi-overlay.dts
index 0677f79cce6e..42b0e6b6318a 100644
--- a/arch/arm/boot/dts/overlays/mipi-dbi-spi-overlay.dts
+++ b/arch/arm/boot/dts/overlays/mipi-dbi-spi-overlay.dts
@@ -31,6 +31,9 @@ panel: panel@0 {
 				reg = <0>;
 				spi-max-frequency = <32000000>;
 
+				width-mm = <0>;
+				height-mm = <0>;
+
 				timing: panel-timing {
 					hactive = <320>;
 					vactive = <240>;
-- 
2.32.0

